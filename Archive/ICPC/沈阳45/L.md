# 沈阳 45th L

ans=原图-删去树后的影响

## 原图

- 每个点仅能选择不超过一条边
- 每选择一条边，就等价于配对两个点
- 问题转化为，在2n个点中，统计有n个pair的不同集合的数量

$res=C_{2n}^n A_n^n...?$

## 删去树

考虑树形dp

### 状态

$dp[i][j][1]$ = $i$ 节点，子树中选择了$j$条边，当前选择了下面的某条边的方案数

$dp[i][j][0]$ = $i$ 节点，子树中选择了$j$，当前没有选择下面的边的方案数

### 转移

**决策一：**

$i$节点选择了某条边 $\rightarrow$ 在所有儿子中选择某个点$j$,$j$不能选边，其他子节点任意选和不选

$$dp[i][1] \leftarrow \sum_{i\in son} \prod_{j\in son,j\neq i} {(dp[j][0]+dp[j][1]) dp[i][0] }$$

**决策二：**

$i$节点不选 $\rightarrow$ 所有子节点任意选和不选

$$dp[i][1] \leftarrow \prod{(dp[j][0]+dp[j][1])} $$ 

时间复杂度 $\mathcal{O}(n^2)$





dp[i][j][1] i子树，选了j条独立边，且i选了和子节点之间的某条边
dp[i][j][0] i子树，选了j条独立边，且i没选和子节点之间的某条边

res[i] 在某颗子树跑背包，res[i]=选了i条边的方案数

dp[i][j] <- res[j]